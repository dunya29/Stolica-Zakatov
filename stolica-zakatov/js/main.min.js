window.addEventListener("load",(()=>{if(document.querySelector(".preloader")){document.body.classList.remove("no-scroll"),disableScroll(),document.querySelectorAll(".preloader__logo path").forEach((e=>{let t=Math.ceil(e.getTotalLength());e.style.strokeDasharray=t+"px",e.style.strokeDashoffset=t,setTimeout((()=>{e.parentNode.classList.add("startAnim")}),0)}));let i=0,a=setInterval((()=>{document.querySelector(".preloader__percent").textContent=i+"%",i++,101===i&&(clearInterval(a),setTimeout((()=>{document.querySelector(".preloader__bar").classList.add("startAnim"),setTimeout((()=>{document.querySelector(".preloader").classList.add("startAnim"),setTimeout((()=>{document.body.classList.add("loaded"),enableScroll(),ScrollTrigger.refresh()}),600)}),700)}),500))}),7)}const e=document.querySelector(".equalizer");e&&gsap.to(e,{ease:"none",scrollTrigger:{trigger:e,pin:!0,pinSpacing:!1,scrub:1,start:"top top",invalidateOnRefresh:!0,anticipatePin:1}});const t=document.querySelector(".partners"),o=document.querySelector(".partners__sticky"),r=document.querySelectorAll(".partners__item");if(o&&r.length){function l(){let e;return e=window.innerWidth>bp.tablet?(window.innerHeight-o.clientHeight)/2>0?(window.innerHeight-o.clientHeight)/2:0:header.clientHeight+10,e}let s=r.length;r.forEach(((e,t)=>{gsap.to(e,{ease:"none",scrollTrigger:{trigger:e,pin:!0,pinSpacing:!1,scrub:!0,start:()=>"top top+="+l(),end:()=>"+="+e.offsetHeight*(s-(window.innerWidth>bp.tablet?2:1)-t),invalidateOnRefresh:!0,anticipatePin:1}})})),gsap.matchMedia().add("(min-width: 767.98px)",(()=>{gsap.to(o,{ease:"none",scrollTrigger:{trigger:o,pin:!0,pinSpacing:!1,scrub:!0,start:()=>"top top+="+l(),end:()=>"+="+t.offsetHeight/s*(s-2),onEnterBack:()=>header.classList.add("hidden"),onLeaveBack:()=>header.classList.remove("hidden"),invalidateOnRefresh:!0,anticipatePin:1}})}))}const n=document.querySelector(".main-history");n&&gsap.to(n,{ease:"none",scrollTrigger:{trigger:n,start:"top center",onEnter:()=>{n.classList.contains("show")||n.classList.add("show")},invalidateOnRefresh:!0}})}));const header=document.querySelector(".header"),iconMenu=document.querySelector(".icon-menu"),modal=document.querySelectorAll(".modal"),modOpenBtn=document.querySelectorAll(".mod-open-btn"),successModal=document.querySelector(".success-mod"),errorModal=document.querySelector(".error-mod");let animSpd=400,bp={largeDesktop:1440.98,desktop:1278.98,laptop:1050.98,tablet:767.98,phone:600.98};function sprite(e){return'<svg><use xlink:href="img/svg/sprite.svg#'+e+'"></use></svg>'}function scrollPos(){return window.pageYOffset||document.documentElement.scrollTop}function enableScroll(){document.querySelector(".modal.open")||(document.querySelectorAll(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach((e=>e.style.paddingRight="0px")),document.body.style.paddingRight="0px",document.body.classList.remove("no-scroll"))}function disableScroll(){if(!document.querySelector(".modal.open")){let e=window.innerWidth>350?window.innerWidth-document.documentElement.clientWidth+"px":0;document.querySelector(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach((t=>t.style.paddingRight=e)),document.body.style.paddingRight=e,document.body.classList.add("no-scroll")}}function smoothDrop(e,t,o=!1){let r=o||500;if(t.style.overflow="hidden",t.style.transition=`height ${r}ms ease`,t.style["-webkit-transition"]=`height ${r}ms ease`,e.classList.contains("active")){e.parentNode.classList.remove("active");let o=t.clientHeight+"px";t.style.height=o,setTimeout((function(){t.style.height="0",setTimeout((()=>{t.style.display="none",t.style.height=null,e.classList.remove("active")}),r)}),0)}else{e.parentNode.classList.add("active"),t.style.display="block";let o=t.clientHeight+"px";t.style.height="0px",setTimeout((function(){t.style.height=o,setTimeout((()=>{t.style.height=null,e.classList.add("active")}),r)}),0)}}function tabSwitch(e,t){e.forEach((o=>{o.addEventListener("click",(()=>{e.forEach((e=>{e.classList.remove("active"),e.setAttribute("aria-selected",!1)})),o.classList.add("active"),o.setAttribute("aria-selected",!0),t.forEach((e=>{e.dataset.block===o.dataset.tab?e.classList.contains("active")||(e.classList.add("active"),e.style.opacity="0",setTimeout((()=>{e.style.opacity="1"}),0)):e.classList.remove("active")}))}))}))}const customScroll=document.querySelectorAll(".custom-scroll");let isFirefox="undefined"!=typeof InstallTrigger;isFirefox&&(document.documentElement.style.scrollbarColor="#ba0060 #f8e5ef"),isFirefox&&customScroll&&customScroll.forEach((e=>{e.style.scrollbarColor="#ba0060 #f8e5ef"}));const anchorLinks=document.querySelectorAll(".js-anchor");anchorLinks.length&&document.querySelectorAll(".js-anchor").forEach((e=>{e.addEventListener("click",(t=>{let o=e.getAttribute("href").indexOf("#");const r=e.getAttribute("href").substring(o);let l=document.querySelector(r);if(l){t.preventDefault();let e=l.getBoundingClientRect().top<0?l.getBoundingClientRect().top-header.clientHeight-10:l.getBoundingClientRect().top-10;iconMenu.classList.contains("active")?(iconMenu.click(),setTimeout((()=>{window.scrollTo({top:scrollPos()+e,behavior:"smooth"})}),300)):window.scrollTo({top:scrollPos()+e,behavior:"smooth"})}}))}));let lastScroll=scrollPos();window.addEventListener("scroll",(()=>{scrollPos()>1?(header.classList.remove("no-scroll"),header.classList.add("scroll"),scrollPos()>lastScroll&&!header.classList.contains("unshow")?header.classList.add("unshow"):scrollPos()<lastScroll&&header.classList.contains("unshow")&&header.classList.remove("unshow")):(header.classList.remove("scroll","unshow"),header.classList.add("no-scroll")),lastScroll=scrollPos()}));const switchBlock=document.querySelectorAll(".switch-block");function openModal(e){let t=document.querySelector(".modal.open");disableScroll(),t&&t.classList.remove("open"),e.classList.add("open")}function closeModal(e){e.querySelector("video")&&e.querySelectorAll("video").forEach((e=>e.pause()));const t=document.querySelector('meta[name="viewport"]'),o=t.content;t.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no",setTimeout((()=>{t.content=o}),100),e.classList.remove("open"),setTimeout((()=>{enableScroll()}),animSpd)}function initfancyModal(e){let t=[],o=e.getAttribute("data-fit")?e.getAttribute("data-fit"):"media-contain",r=e.getAttribute("data-fancy"),l=e.hasAttribute("data-thumb");document.querySelectorAll("[data-fancy]").forEach((e=>{if(!e.closest(".swiper-slide-duplicate")&&e.getAttribute("data-fancy")===r){let o={src:e.getAttribute("data-src"),type:e.getAttribute("data-type")||"image",caption:e.getAttribute("data-caption")||""};"video"===e.getAttribute("data-type")&&e.getAttribute("data-poster")&&(o.poster=e.getAttribute("data-poster")),t.push(o)}}));let n=t.findIndex((t=>t.src===e.getAttribute("data-src")));document.querySelector(".footer").insertAdjacentHTML("afterend",`\n                <div class="custom-scroll modal fancy-modal ${r+"-modal"}">\n                    <div class="fancy-modal__content">\n                        <button type="button" class="btn-cross modal__close"></button>\n                        <div class="modal__top">\n                            <h2>${t[n].caption}</h2>\n                        </div>\n                        <div class="fancy-modal__mainswiper">\n                            <div class="swiper">\n                                <div class="swiper-wrapper">\n                                    ${t.map(((e,t)=>`<div class="swiper-slide">\n                                        <div class="${o}">\n                                            ${"video"===e.type?`<video ${t===n?`src='${e.src}'`:`data-src='${e.src}'`} ${e.poster?`poster='${e.poster}'`:""} loop autoplay playsinline mute controls></video>`:`<img src=${e.src} alt="">`}                                                \n                                        </div>\n                                    </div>`)).join("")}\n                                </div>\n                            </div>\n                            <div class="nav-btns">\n                                <button type="button" class="nav-btn nav-btn--prev">${sprite("btn-prev")}</button>\n                                <button type="button" class="nav-btn nav-btn--next">${sprite("btn-next")}</button>\n                            </div>\n                        </div>\n                        ${l&&t.length>1?`<div class="fancy-modal__thumbswiper">\n                            <div class="swiper">\n                                <div class="swiper-wrapper">\n                                    ${t.map((e=>`<div class="swiper-slide">\n                                        <div class="${o} ${"video"===e.type?"video":""}">\n                                            ${"video"===e.type?`<img ${e.poster?`src='${e.poster}'`:""}>`:`<img src=${e.src} alt="">`}                                                \n                                        </div>\n                                    </div>`)).join("")}\n                                </div>\n                            </div>\n                        </div>`:""}\n                    </div>\n                </div>\n            `);const i=document.querySelector(".fancy-modal");let a;l&&t.length>1&&(a=new Swiper(i.querySelector(".fancy-modal__thumbswiper .swiper"),{slidesPerView:3,spaceBetween:12,observer:!0,observeParents:!0,watchSlidesProgress:!0,initialSlide:n,navigation:{prevEl:i.querySelector(".nav-btn--prev"),nextEl:i.querySelector(".nav-btn--next")},breakpoints:{575.98:{slidesPerView:4}},speed:800}));let s=new Swiper(i.querySelector(".fancy-modal__mainswiper .swiper"),{slidesPerView:1,observer:!0,observeParents:!0,initialSlide:n,effect:"fade",fadeEffect:{crossFade:!0},thumbs:{swiper:a||null},navigation:{prevEl:i.querySelector(".nav-btn--prev"),nextEl:i.querySelector(".nav-btn--next")},speed:300});s.on("slideChange",(e=>{i.querySelector(".modal__top h2").textContent=t[s.activeIndex].caption,i.querySelector("video")&&i.querySelectorAll("video").forEach((e=>e.pause()));let o=s.slides[s.activeIndex].querySelector("[data-src]"),r=s.slides[s.activeIndex].querySelector("video");o?(o.setAttribute("src",o.getAttribute("data-src")),o.removeAttribute("data-src")):!o&&r&&r.play()})),openModal(i),i.querySelectorAll(".modal__close").forEach((e=>{e.addEventListener("click",(e=>{closeModal(i),setTimeout((()=>{i.remove()}),animSpd)}))}))}switchBlock&&switchBlock.forEach((e=>{tabSwitch(e.querySelectorAll("[data-tab]"),e.querySelectorAll("[data-block]"))})),modal&&modal.forEach((e=>{e.addEventListener("click",(t=>{e.querySelector(".modal__content").contains(t.target)||closeModal(e)})),e.querySelectorAll(".modal__close").forEach((t=>{t.addEventListener("click",(()=>{closeModal(e)}))}))})),modOpenBtn&&modOpenBtn.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();let o=e.getAttribute("data-modal");openModal(document.getElementById(o))}))}));const fancyBlock=document.querySelectorAll(".fancy-block");function setSuccessTxt(e=!1,t=!1,o=!1){successModal.querySelector("h2").textContent=e||"Ваша заявка принята",successModal.querySelector(".main-btn span").textContent=o||"Закрыть",successModal.querySelector("p").textContent=t||""}function setErrorTxt(e=!1,t=!1,o=!1){errorModal.querySelector("h2").textContent=e||"Ошибка",errorModal.querySelector(".main-btn span").textContent=o||"Закрыть",errorModal.querySelector("p").textContent=t||""}function openSuccessMod(e=!1,t=!1,o=!1){setSuccessTxt(e,t,o),openModal(successModal)}function openErrorMod(e=!1,t=!1,o=!1){setErrorTxt(e,t,o),openModal(errorModal)}function formReset(e){e.querySelectorAll(".item-form").length>0&&e.querySelectorAll(".item-form").forEach((e=>e.classList.remove("error"))),e.querySelectorAll("[data-error]").length>0&&e.querySelectorAll("[data-error]").forEach((e=>e.textContent="")),e.querySelectorAll("input").forEach((e=>{["hidden","checkbox","radio"].includes(e.type)||(e.value=""),["checkbox","radio"].includes(e.type)&&!e.classList.contains("required")&&(e.checked=!1)})),e.querySelector("textarea")&&(e.querySelector("textarea").value=""),e.querySelector(".file-form__items")&&(e.querySelector(".file-form__items").innerHTML="")}fancyBlock.length&&fancyBlock.forEach((e=>{e.addEventListener("click",(t=>{const o=e.querySelectorAll("[data-fancy]");o.length&&o.forEach((e=>{e.contains(t.target)&&initfancyModal(e)}))}))}));let allFileTypes=[{extension:".png",mimeType:"image/png"},{extension:[".jpg",".jpeg"],mimeType:"image/jpeg"},{extension:".gif",mimeType:"image/gif"},{extension:".bmp",mimeType:"image/bmp"},{extension:".txt",mimeType:"text/plain"},{extension:".rtf",mimeType:"application/rtf"},{extension:[".ppt",".pot",".pps",".ppa"],mimeType:"application/vnd.ms-powerpoint"},{extension:".pptx",mimeType:"application/vnd.openxmlformats-officedocument.presentationml.presentation"},{extension:".odp",mimeType:"application/vnd.oasis.opendocument.presentation"},{extension:".ods",mimeType:"application/vnd.oasis.opendocument.spreadsheet"},{extension:".doc",mimeType:"application/msword"},{extension:".docx",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{extension:".pdf",mimeType:"application/pdf"},{extension:[".xls",".xlt",".xla",".xlsb",".xlsm",".xltx",".xltm"],mimeType:"application/vnd.ms-excel"},{extension:".xlsx",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},{extension:".odt",mimeType:"application/vnd.oasis.opendocument.text"}];function addFile(e,t){let o=t.querySelector("input").getAttribute("data-max-size"),r=t.querySelector("input").getAttribute("accept"),l=[];if(r){let e=r.split(",").map((e=>e.trim().toLowerCase())).filter((e=>""!==e));allFileTypes.forEach((t=>{if(Array.isArray(t.extension)){for(const o of t.extension)if(e.includes(o)){l.push(t.mimeType);break}}else"string"==typeof t.extension&&e.includes(t.extension)&&l.push(t.mimeType)})),r=e.map((e=>e.replace(/^\./,""))).join(", ")}for(let n=0;n<e.length;n++){let i=e[n];if(o&&i.size>1024*o*1024)return t.querySelector("input").value="",t.classList.add("error"),t.querySelectorAll(".file-form__item").forEach((e=>e.remove())),void(t.querySelector("[data-error]").textContent=`Файл должен быть менее ${o} МБ`);if(r&&l.length&&!l.includes(i.type))return t.querySelector("input").value="",t.classList.add("error"),t.querySelectorAll(".file-form__item").forEach((e=>e.remove())),void(t.querySelector("[data-error]").textContent=`Разрешённые форматы: ${r}`);{t.classList.remove("error"),t.querySelector("[data-error]").textContent="";let e=new FileReader;e.readAsDataURL(i),e.onload=()=>{t.querySelector(".file-form__items").insertAdjacentHTML("afterbegin",`<div class="file-form__item">\n                        <div class="file-form__name">${i.name}</div>\n                        <button class="btn-cross file-form__del"></button>\n                    </div>`)},e.onerror=()=>{console.log(e.error)}}}}document.querySelector(".file-form")&&document.querySelectorAll(".file-form").forEach((e=>{e.querySelector("input").addEventListener("change",(t=>{e.querySelectorAll(".file-form__item").forEach((e=>e.remove())),addFile(t.target.files,e)})),e.addEventListener("click",(t=>{e.querySelectorAll(".file-form__del").forEach(((o,r)=>{if(o.contains(t.target)){const t=new DataTransfer,l=e.querySelector("input"),{files:n}=l;for(let e=0;e<n.length;e++){let o=n[e];e!==r&&t.items.add(o)}l.files=t.files,setTimeout((()=>{o.parentNode.remove()}),0)}}))})),e.addEventListener("dragenter",(e=>{e.preventDefault()})),e.addEventListener("dragover",(e=>{e.preventDefault()})),e.addEventListener("dragleave",(e=>{e.preventDefault()})),e.addEventListener("drop",(function(t){t.preventDefault();const o=new DataTransfer;o.items.add(t.dataTransfer.files[0]);let r=Array.from(o.files);e.querySelector("input").files=o.files,e.querySelectorAll(".file-form__item").forEach((e=>e.remove())),addFile(r,e)}))}));const accordion=document.querySelectorAll(".accordion");accordion.length&&accordion.forEach((e=>{e.querySelector(".accordion__header").addEventListener("click",(()=>{e.classList.contains("no-close")||e.parentNode.parentNode.querySelectorAll(".accordion").forEach((t=>{if(t.querySelector(".accordion__header").classList.contains("active")&&(smoothDrop(t.querySelector(".accordion__header"),t.querySelector(".accordion__body")),t.getBoundingClientRect().top<0)){let o=scrollPos()+e.getBoundingClientRect().top-t.querySelector(".accordion__body").clientHeight-header.clientHeight-10;window.scrollTo(0,o)}})),smoothDrop(e.querySelector(".accordion__header"),e.querySelector(".accordion__body"))}))}));const shareList=document.querySelectorAll(".share [data-share]");if(shareList){const e=encodeURIComponent(window.location.href),t=encodeURIComponent(document.title);let o=[{value:"vk",href:"https://vk.com/share.php?url="+e+"&title="+t},{value:"telegram",href:"https://t.me/share/url?url="+e+"&text="+t},{value:"viber",href:"viber://forward?text="+e},{value:"odnoklassniki",href:"https://connect.ok.ru/offer?url="+e+"&title="+t}];shareList.forEach((e=>{let t=e.getAttribute("data-share");o.forEach((o=>{o.value===t.toLowerCase()&&e.setAttribute("href",o.href)}))}))}const shareLink=document.querySelector(".share__link");let shareTimeout;shareLink&&shareLink.addEventListener("click",(e=>{e.preventDefault(),clearTimeout(shareTimeout);let t=document.createElement("input");document.body.append(t),t.value=window.location.href,t.select(),document.execCommand("copy"),t.remove(),shareLink.classList.add("coppied"),shareTimeout=setTimeout((()=>{shareLink.classList.remove("coppied")}),1500)}));const scrollIndicator=document.querySelector(".scroll-indicator");scrollIndicator&&window.addEventListener("scroll",(()=>{scrollIndicator.style.width=100*scrollPos()/(document.body.scrollHeight-window.innerHeight)+"%"}));const fixedBtn=document.querySelector(".fixed-btn");function fixedBtnVisibility(){scrollPos()>window.innerHeight&&scrollPos()+window.innerHeight+150<document.body.scrollHeight?(fixedBtn.classList.add("show"),fixedBtn.style.marginRight=(document.documentElement.clientWidth-window.innerWidth)/2+"px"):fixedBtn.classList.remove("show")}fixedBtn&&(fixedBtnVisibility(),window.addEventListener("scroll",fixedBtnVisibility)),iconMenu&&iconMenu.addEventListener("click",(()=>{iconMenu.classList.contains("active")?(header.classList.remove("show-mobMenu"),iconMenu.classList.remove("active"),iconMenu.setAttribute("aria-label","Открыть меню"),enableScroll()):(header.classList.add("show-mobMenu"),iconMenu.classList.add("active"),iconMenu.setAttribute("aria-label","Закрыть меню"),disableScroll()),window.addEventListener("resize",(()=>{window.innerWidth>bp.tablet&&header.classList.contains("show-mobMenu")&&iconMenu.click()}));const e=document.querySelector(".mobile-menu");e&&e.addEventListener("click",(t=>{e.querySelector(".mobile-menu__inner").contains(t.target)||iconMenu.click()}))}));const headliners=document.querySelector(".headliners");if(headliners){new Swiper(headliners.querySelector(".swiper"),{slidesPerView:1.47,observer:!0,observeParents:!0,grabCursor:!0,centeredSlides:!0,watchSlidesProgress:!0,effect:"coverflow",slideToClickedSlide:!0,initialSlide:headliners.querySelectorAll(".swiper-slide").length>2?2:0,coverflowEffect:{rotate:0,stretch:0,depth:400,modifier:1,slideShadows:!0},breakpoints:{1050.98:{slidesPerView:3.55},767.98:{slidesPerView:2.95},479.98:{slidesPerView:2.45}},scrollbar:{el:headliners.querySelector(".swiper-scrollbar"),draggable:!0},autoplay:{delay:3e3,pauseOnMouseEnter:!0,disableOnInteraction:!1},speed:1e3})}const about=document.querySelector(".about");if(about){let e,t=new Swiper(about.querySelector(".about__swiper1"),{observer:!0,observeParents:!0,effect:"fade",fadeEffect:{crossFade:!0},watchSlidesProgress:!0,allowTouchMove:!1,speed:1e3}),o=new Swiper(about.querySelector(".about__swiper3"),{observer:!0,observeParents:!0,effect:"fade",fadeEffect:{crossFade:!0},watchSlidesProgress:!0,allowTouchMove:!1,speed:1e3}),r=new Swiper(about.querySelector(".about__swiper2"),{observer:!0,observeParents:!0,effect:"fade",fadeEffect:{crossFade:!0},watchSlidesProgress:!0,allowTouchMove:!1,scrollbar:{el:about.querySelector(".swiper-scrollbar"),draggable:!0},autoplay:{delay:5e3,pauseOnMouseEnter:!0,disableOnInteraction:!1},speed:1e3});r.on("slideChange",(()=>{clearTimeout(e),t.slideTo(r.activeIndex),e=setTimeout((()=>{o.slideTo(r.activeIndex)}),800)}))}const projects=document.querySelector(".projects"),projectCols=document.querySelector(".projects__cols");if(projects&&projects.querySelector(".swiper")){let e=new Swiper(".projects__imageswiper",{observer:!0,observeParents:!0,watchSlidesProgress:!0,parallax:!0,navigation:{nextEl:projects.querySelector(".nav-btn--next"),prevEl:projects.querySelector(".nav-btn--prev")},scrollbar:{el:projects.querySelector(".swiper-scrollbar"),draggable:!0},autoplay:{delay:5e3,pauseOnMouseEnter:!0,disableOnInteraction:!1},speed:1e3}),t=new Swiper(".projects__contentswiper",{observer:!0,observeParents:!0,effect:"fade",fadeEffect:{crossFade:!0},allowTouchMove:!1,speed:1e3});e.on("slideChange",(()=>{t.slideTo(e.activeIndex)})),projectCols&&projects.querySelector(".nav-btn")&&(projectCols.addEventListener("mousemove",(e=>{let t=projectCols.getBoundingClientRect().left,o=projectCols.clientWidth/4;e.clientX-t<o?projects.querySelector(".nav-btn--prev").classList.add("show"):projects.querySelector(".nav-btn--prev").classList.remove("show"),window.innerWidth-e.clientX<o?projects.querySelector(".nav-btn--next").classList.add("show"):projects.querySelector(".nav-btn--next").classList.remove("show")})),projectCols.addEventListener("mouseleave",(()=>{projects.querySelector(".nav-btn--prev").classList.remove("show"),projects.querySelector(".nav-btn--next").classList.remove("show")})))}const schedule=document.querySelector(".schedule"),scheduleFilter=document.querySelector(".schedule-filter"),filterSelected=document.querySelector(".filter-selected__items");let filterObj;schedule&&(filterObj={checkInp:function(e){e.checked=!0,e.setAttribute("checked",!0)},uncheckInp:function(e){e.checked=!1,e.removeAttribute("checked")},setSelected:function(e){let t=e.parentNode.querySelector("span:last-child").textContent,o=e.getAttribute("data-id"),r=e.getAttribute("data-name"),l=r?r+" "+t.toLowerCase():t;filterSelected.insertAdjacentHTML("afterbegin",`<li data-target="${o}">${l}<button class="btn-cross"></button></li>`)},removeSelected:function(e){filterSelected.querySelector(`[data-target="${e}"]`)&&filterSelected.querySelector(`[data-target="${e}"]`).remove()},selectedOnClick:function(e){filterSelected.querySelectorAll("li").forEach((t=>{if(t.querySelector(".btn-cross").contains(e.target)){let e=t.getAttribute("data-target");scheduleFilter.querySelector(`label input[data-id='${e}']`).click()}}))}},scheduleFilter.addEventListener("click",(e=>{scheduleFilter.querySelector("[data-schedule-tab]")&&scheduleFilter.querySelectorAll("[data-schedule-tab]").forEach((t=>{if(t.contains(e.target)){schedule.querySelectorAll("[data-schedule-tab]").forEach((e=>{e.classList.remove("active"),e.setAttribute("aria-selected",!1)})),t.classList.add("active"),t.setAttribute("aria-selected",!0);let e=t.getAttribute("data-schedule-tab"),o=schedule.querySelector(`[data-schedule-block='${e}']`);o&&(schedule.querySelectorAll("[data-schedule-block").forEach((e=>e.classList.remove("active"))),o.classList.add("active"),o.style.opacity="0",setTimeout((()=>{o.style.opacity="1"}),0))}})),scheduleFilter.querySelector("label input")&&scheduleFilter.querySelectorAll("label input").forEach((t=>{if(t.contains(e.target)){let e=t.getAttribute("data-id");"checkbox"===t.type?t.checked?filterObj.setSelected(t):filterObj.removeSelected(e):"radio"===t.type&&(scheduleFilter.querySelectorAll(`input[name='${t.name}']`).forEach((e=>filterObj.removeSelected(e.getAttribute("data-id")))),scheduleFilter.setSelected(t))}})),window.innerWidth<=bp.laptop&&e.target.classList.contains("schedule-filter__lbl")&&e.target.nextElementSibling.classList.contains("modal")&&openModal(e.target.nextElementSibling),window.addEventListener("resize",(()=>{window.innerWidth>bp.laptop&&scheduleFilter.querySelector(".modal.open")&&closeModal(scheduleFilter.querySelector(".modal.open"))}))})),filterSelected.addEventListener("click",(e=>filterObj.selectedOnClick(e))));const Sc=(e,t)=>Math.random()*(t-e)+e;class MatterClass{constructor(e){this.container=e.container,this.elements=[...e.elements],this.restitution=e.restitution||.4,this.gravity=e.gravity||.2,this.interactCallback=e.interactCallback||null,this.updateCallback=e.updateCallback||null,this.triggerSelector=e.triggerSelector||null,this.element=this.container,this.width=this.element.getBoundingClientRect().width,this.height=this.element.getBoundingClientRect().height,this.engine=Matter.Engine.create({gravity:{y:this.gravity}}),this.world=this.engine.world,this.render=Matter.Render.create({element:this.element,engine:this.engine,options:{width:this.width,height:this.height,wireframes:!1,background:"transparent"}}),this.setupMouse(),this.addWalls(),Matter.Render.run(this.render),this.runner=Matter.Runner.create(),Matter.Runner.run(this.runner,this.engine),this.addElements(),this.updateBodies()}addElements(){if(!Array.isArray(this.elements))return void console.error("Elements should be an array.");const e=this.elements.map((e=>{const t=e.getBoundingClientRect(),o=Math.min(e.clientWidth,e.clientHeight)/2,r=Math.min(parseFloat(window.getComputedStyle(e).borderRadius),o),l=Matter.Bodies.rectangle(-200,-200,t.width,t.height,{isStatic:!1,restitution:this.restitution,label:e.getAttribute("data-target"),render:{fillStyle:"transparent",strokeStyle:"transparent"},chamfer:{radius:r}});return Matter.Events.on(this.runner,null===this.triggerSelector||void 0===this.triggerSelector?"beforeUpdate":"tick",(()=>{e.style.top=`${l.position.y}px`,e.style.left=`${l.position.x}px`,e.style.transform=`translate(-50%, -50%) rotate(${l.angle}rad)`})),l}));Matter.Composite.add(this.world,e)}addWalls(){const e={label:"wall",isStatic:!0,render:{fillStyle:"transparent",strokeStyle:"transparent"}},t=[Matter.Bodies.rectangle(0,-150,2*this.width,300,e),Matter.Bodies.rectangle(0,this.height+25,2*this.width,60,e),Matter.Bodies.rectangle(-150,0,300,2*this.height,e),Matter.Bodies.rectangle(this.width+150,0,300,2*this.height,e)];Matter.Composite.add(this.world,[...t])}setupMouse(){const e=Matter.Mouse.create(this.render.canvas),t=Matter.MouseConstraint.create(this.engine,{mouse:e,constraint:{stiffness:.1,render:{visible:!1}}});Matter.Composite.add(this.world,t),this.render.mouse=e,e.element.removeEventListener("mousewheel",e.mousewheel),e.element.removeEventListener("DOMMouseScroll",e.mousewheel),this.interactCallback&&this.interactCallback(t)}updateBodies(){if(null===this.triggerSelector||void 0===this.triggerSelector){const e=Matter.Composite.allBodies(this.engine.world),t="wall",o=this.height,r=this.width-10;let l=0;const n=setInterval((()=>{l++,e[l]?.label!==t&&e[l]&&(Matter.Body.setStatic(e[l],!1),Matter.Body.setPosition(e[l],{x:Sc(0,r),y:0}),Matter.Body.setVelocity(e[l],{x:Sc(0,10),y:Sc(0,5)}),e[l].position.y>o&&Matter.Body.setPosition(e[l],{x:Sc(0,r),y:0})),l===e.length&&clearInterval(n)}),100)}else ml.create({trigger:this.triggerSelector,once:!0,start:"top 50%",end:"bottom 50%",onEnter:()=>{const e=Matter.Composite.allBodies(this.engine.world),t=Math.floor(this.width);let o=1;const r=setInterval((()=>{o+=1;const l=Sc(0,t-50),n=e[o];if("wall"!==n?.label&&n){Matter.Body.setStatic(n,!1),Matter.Body.setPosition(n,{x:l,y:0}),Matter.Body.setVelocity(n,{x:Sc(0,10),y:Sc(0,5)});const e=n.bounds.max.x-n.bounds.min.x;n.position.x<e?Matter.Body.setPosition(n,{x:e,y:n.position.y}):n.position.x>this.width-e&&Matter.Body.setPosition(n,{x:this.width-e,y:n.position.y})}o===e.length&&clearInterval(r)}),100)}})}}const jsMatter=document.querySelectorAll(".js-matter");function animate(){document.querySelectorAll("[data-animation]").length&&document.querySelectorAll("[data-animation]").forEach((e=>{let t=e.getBoundingClientRect().top+scrollPos(),o=Math.abs(window.innerHeight-.1*e.offsetHeight);if(scrollPos()>t-o){let t=e.getAttribute("data-animation");e.classList.add(t)}}))}jsMatter.length&&jsMatter.forEach((e=>{let t,o,r;const l=()=>function(e){let t=e.getBoundingClientRect().top,l=scrollPos()+t,n=Math.abs(window.innerHeight-.5*e.offsetHeight);t>0&&scrollPos()>l-n&&!e.classList.contains("animated")&&(new MatterClass({container:e,elements:e.querySelectorAll(".js-matter__item")}),e.classList.add("animated"),window.removeEventListener("scroll",o),window.removeEventListener("resize",r))}(e);o=()=>l(),r=()=>l(),window.addEventListener("scroll",o),window.addEventListener("resize",r),l(),window.addEventListener("wheel",(()=>{clearInterval(t),e.style.pointerEvents="none",t=setInterval((()=>{e.style.pointerEvents=null}),100)}))})),animate(),window.addEventListener("scroll",animate);const map=document.querySelector(".map"),itemMap=document.querySelectorAll(".item-map"),mapModal=document.querySelector(".map-modal"),mapModalMob=document.querySelector(".mapMobile-modal"),mapBtn=document.querySelector(".map__btn");function setMap(e){e.querySelector("[data-src]")&&e.querySelectorAll("[data-src]").forEach((e=>{let t=e.getAttribute("data-src");e.setAttribute("src",t),e.removeAttribute("data-src")})),e.querySelector("[data-srcset]")&&e.querySelectorAll("[data-srcset]").forEach((e=>{let t=e.getAttribute("data-srcset");e.setAttribute("srcset",t),e.removeAttribute("data-srcset")}));let t=e.querySelector("[data-zoom]")?e.querySelector("[data-zoom]").innerHTML:"",o=e.getAttribute("data-link")||"",r=e.querySelector("[data-direction]")?e.querySelector("[data-direction]").textContent:"",l=e.querySelector("[data-title]")?e.querySelector("[data-title]").textContent:"";mapModal.querySelector(".map-modal__preview")&&(mapModal.querySelector(".map-modal__preview").innerHTML=t),mapModal.querySelector(".map-modal__link")&&mapModal.querySelector(".map-modal__link").setAttribute("href",o),mapModal.querySelector(".map-modal__direction")&&(mapModal.querySelector(".map-modal__direction").textContent=r),mapModal.querySelector(".map-modal__title")&&(mapModal.querySelector(".map-modal__title").textContent=l),mapModal.querySelector(".modal__content").style.transformOrigin=`${e.getBoundingClientRect().left}px ${e.getBoundingClientRect().top}px`}if(map&&map.addEventListener("click",(e=>{map.querySelectorAll(".item-map").length&&map.querySelectorAll(".item-map").forEach((t=>{t.contains(e.target)&&(setMap(t),openModal(mapModal),header.classList.add("unshow"))}))})),mapBtn&&mapModalMob){let e,t,o,r,l,n;mapBtn.addEventListener("click",(()=>{r=0,l=0,n=0,mapModalMob.querySelector(".mapMobile-modal__inner").style.transform="translateX(0px)",mapModalMob.querySelector(".mapMobile-modal__preview-view").style.transform="translateX(0px)",mapModalMob.querySelector(".mapMobile-modal__preview-view").style.backgroundPosition="left 0px center";let i=map.querySelector("[data-map-layer]").getAttribute("src"),a=new Image;a.src=i,a.onload=function(){e=a.width,t=a.height,o=e/(t/window.innerHeight),mapModalMob.querySelector(".mapMobile-modal__inner").style.width=o+"px",mapModalMob.querySelector(".mapMobile-modal__preview-view").style.width=window.innerWidth/o*100+"%"},mapModalMob.querySelector(".mapMobile-modal__inner").innerHTML=map.querySelector(".map__inner").innerHTML,setTimeout((()=>{openModal(mapModalMob)}),0)})),mapModalMob.querySelector(".modal__content").addEventListener("touchstart",(e=>{r=e.touches[0].clientX})),mapModalMob.querySelector(".modal__content").addEventListener("touchmove",(e=>{l=n+e.touches[0].clientX-r;const t=window.innerWidth-o;l>0?l=0:l<t&&(l=t),mapModalMob.querySelector(".mapMobile-modal__inner").style.transform=`translateX(${l}px)`,mapModalMob.querySelector(".mapMobile-modal__preview-view").style.transform=`translateX(${-l/window.innerWidth*100}%)`,mapModalMob.querySelector(".mapMobile-modal__preview-view").style.backgroundPosition=`left ${mapModalMob.querySelector(".mapMobile-modal__preview-view").clientWidth*l/window.innerWidth}px center`})),mapModalMob.querySelector(".modal__content").addEventListener("touchend",(()=>{n=l})),mapModalMob.querySelector(".modal__content").addEventListener("touchcancel",(()=>{l=n,mapModalMob.querySelector(".mapMobile-modal__inner").style.transform=`translateX(${l}px)`,mapModalMob.querySelector(".mapMobile-modal__preview-view").style.transform=`translateX(${-l/window.innerWidth*100}%)`,mapModalMob.querySelector(".mapMobile-modal__preview-view").style.backgroundPosition=`left ${mapModalMob.querySelector(".mapMobile-modal__preview-view").clientWidth*l/window.innerWidth}px center`})),window.addEventListener("resize",(()=>{o=e/(t/window.innerHeight),r=0,l=0,n=0,mapModalMob.querySelector(".mapMobile-modal__inner").style.width=o+"px",mapModalMob.querySelector(".mapMobile-modal__inner").style.transform="translateX(0)",mapModalMob.querySelector(".mapMobile-modal__preview-view").style.width=window.innerWidth/o*100+"%",mapModalMob.querySelector(".mapMobile-modal__preview-view").style.transform="translateX(0)",mapModalMob.querySelector(".mapMobile-modal__preview-view").style.backgroundPosition="left 0px center",window.innerWidth>bp.tablet&&mapModalMob.classList.contains("open")&&closeModal(mapModalMob)}))}mapModal&&mapModalMob&&mapModalMob.addEventListener("click",(e=>{mapModalMob.querySelectorAll(".item-map").length&&mapModalMob.querySelectorAll(".item-map").forEach((t=>{t.contains(e.target)&&(setMap(t),mapModal.classList.add("open"))}))}));